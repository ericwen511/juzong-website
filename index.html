<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>剧踪 - 你的追剧记录助手</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <!-- 配置Tailwind自定义主题 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1', // 主色调：靛蓝色，代表信任和稳定
                        secondary: '#ec4899', // 辅助色：粉色，用于强调和互动元素
                        dark: '#1e1b4b', // 深色：用于背景
                        light: '#f5f3ff', // 浅色：用于文本和卡片背景
                        neutral: '#818cf8', // 中性色：用于次要文本和边框
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .backdrop-blur {
                backdrop-filter: blur(8px);
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-dark to-slate-900 text-light min-h-screen font-sans">
    <!-- 登录模态框 -->
    <div id="login-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-slate-800 rounded-2xl w-full max-w-md p-6">
            <div class="text-center mb-6">
                <div class="flex items-center justify-center space-x-2 mb-4">
                    <i class="fa fa-play-circle text-primary text-3xl"></i>
                    <h2 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">剧踪</h2>
                </div>
                <h3 class="text-xl font-bold">请登录</h3>
                <p class="text-slate-400 text-sm mt-1">登录以继续使用剧踪</p>
            </div>
            
            <form id="login-form">
                <div class="mb-5">
                    <label class="block text-sm font-medium mb-2" for="username">用户名</label>
                    <input type="text" id="username" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="输入用户名" required>
                </div>
                
                <div class="mb-6">
                    <div class="flex justify-between mb-2">
                        <label class="block text-sm font-medium" for="password">密码</label>
                    </div>
                    <input type="password" id="password" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="输入密码" required>
                </div>
                
                <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-white rounded-lg font-medium py-3 transition-colors">登录</button>
                
                <div class="mt-4 text-center">
                    <p class="text-sm text-slate-400">测试用户: 
                        <button type="button" class="test-user-btn text-primary hover:underline" data-user="张小明">张小明</button> | 
                        <button type="button" class="test-user-btn text-primary hover:underline" data-user="李华">李华</button> | 
                        <button type="button" class="test-user-btn text-primary hover:underline" data-user="王芳">王芳</button>
                    </p>
                </div>
            </form>
        </div>
    </div>

    <!-- 导航栏 -->
    <header id="navbar" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between backdrop-blur bg-dark/70 border-b border-neutral/20">
            <div class="flex items-center space-x-2">
                <i class="fa fa-play-circle text-primary text-3xl"></i>
                <h1 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">剧踪</h1>
            </div>
            
            <!-- 桌面导航 -->
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#dashboard" class="nav-link font-medium hover:text-primary transition-colors">首页</a>
                <a href="#collection" class="nav-link font-medium hover:text-primary transition-colors">我的剧集</a>
                <a href="#friends" class="nav-link font-medium hover:text-primary transition-colors">好友</a>
                <a href="#statistics" class="nav-link font-medium hover:text-primary transition-colors">统计</a>
            </nav>
            
            <div class="flex items-center space-x-4">
                <button id="notification-btn" class="relative p-2 rounded-full hover:bg-primary/20 transition-colors">
                    <i class="fa fa-bell text-xl"></i>
                    <span class="absolute top-1 right-1 w-2 h-2 bg-secondary rounded-full"></span>
                </button>
                
                <div class="relative group">
                    <button class="flex items-center space-x-2 focus:outline-none">
                        <img id="user-avatar" src="https://picsum.photos/id/64/200" alt="用户头像" class="w-8 h-8 rounded-full object-cover border-2 border-primary">
                        <span id="user-name" class="hidden md:inline font-medium">张小明</span>
                        <i class="fa fa-chevron-down text-xs"></i>
                    </button>
                    
                    <!-- 用户菜单 -->
                    <div class="absolute right-0 mt-2 w-48 bg-slate-800 rounded-lg shadow-lg py-2 z-50 hidden group-hover:block transition-all">
                        <a href="#profile" class="block px-4 py-2 hover:bg-primary/20 transition-colors">
                            <i class="fa fa-user mr-2"></i>个人资料
                        </a>
                        <a href="#settings" class="block px-4 py-2 hover:bg-primary/20 transition-colors">
                            <i class="fa fa-cog mr-2"></i>设置
                        </a>
                        <div class="border-t border-neutral/20 my-1"></div>
                        <a href="#" id="logout-btn" class="block px-4 py-2 hover:bg-red-500/20 text-red-400 transition-colors">
                            <i class="fa fa-sign-out mr-2"></i>退出登录
                        </a>
                    </div>
                </div>
                
                <!-- 移动端菜单按钮 -->
                <button id="mobile-menu-btn" class="md:hidden p-2 rounded-full hover:bg-primary/20 transition-colors">
                    <i class="fa fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- 移动端导航菜单 -->
        <div id="mobile-menu" class="md:hidden bg-slate-800 border-t border-neutral/20 hidden">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#dashboard" class="py-2 font-medium hover:text-primary transition-colors">首页</a>
                <a href="#collection" class="py-2 font-medium hover:text-primary transition-colors">我的剧集</a>
                <a href="#friends" class="py-2 font-medium hover:text-primary transition-colors">好友</a>
                <a href="#statistics" class="py-2 font-medium hover:text-primary transition-colors">统计</a>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <!-- 英雄区/欢迎区 -->
        <section id="dashboard" class="mb-12">
            <div class="bg-gradient-to-r from-primary/20 to-secondary/20 rounded-2xl p-6 md:p-8 mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                    <div>
                        <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-2 text-shadow">
                            嗨，<span id="welcome-username">张小明</span> 👋
                        </h2>
                        <p class="text-slate-300 text-lg mb-4">
                            继续你的追剧之旅吧，你有 <span id="updating-count" class="text-primary font-semibold">0 部</span> 剧集正在更新
                        </p>
                        <button id="add-drama-btn" class="bg-primary hover:bg-primary/90 text-white font-medium px-6 py-3 rounded-lg transition-all transform hover:scale-105 flex items-center">
                            <i class="fa fa-plus mr-2"></i> 添加新剧集
                        </button>
                    </div>
                    <div class="mt-6 md:mt-0">
                        <img src="https://picsum.photos/id/364/300/200" alt="热门剧集推荐" class="rounded-lg shadow-xl w-full md:w-auto max-w-xs transform rotate-2 hover:rotate-0 transition-transform duration-300">
                    </div>
                </div>
            </div>
            
            <!-- 继续观看 -->
            <div class="mb-10">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">继续观看</h3>
                    <a href="#collection" class="text-primary hover:text-primary/80 text-sm font-medium flex items-center">
                        查看全部 <i class="fa fa-arrow-right ml-1"></i>
                    </a>
                </div>
                
                <div id="continue-watching-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- 继续观看的剧集将通过JS动态生成 -->
                    <div class="col-span-full text-center py-12 text-slate-400">
                        <i class="fa fa-film text-5xl mb-4 opacity-30"></i>
                        <p>还没有正在追的剧集</p>
                        <button id="add-first-drama-btn" class="mt-4 bg-primary/20 hover:bg-primary/30 text-primary px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                            添加你的第一部剧集
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 最近更新 -->
            <div>
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">最近更新</h3>
                    <a href="#" class="text-primary hover:text-primary/80 text-sm font-medium flex items-center">
                        更多更新 <i class="fa fa-arrow-right ml-1"></i>
                    </a>
                </div>
                
                <div id="recent-updates-container" class="overflow-x-auto scrollbar-hide">
                    <div class="flex space-x-5 pb-4 min-w-max">
                        <!-- 最近更新的剧集将通过JS动态生成 -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 我的剧集收藏 -->
        <section id="collection" class="mb-12">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                <h2 class="text-2xl font-bold mb-4 md:mb-0">我的剧集收藏</h2>
                
                <div class="flex flex-wrap gap-3 w-full md:w-auto">
                    <div class="relative">
                        <input type="text" id="drama-search" placeholder="搜索剧集..." class="bg-slate-800/50 border border-slate-700 rounded-lg pl-10 pr-4 py-2 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-primary">
                        <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"></i>
                    </div>
                    
                    <select id="status-filter" class="bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="all">全部状态</option>
                        <option value="watching">正在追</option>
                        <option value="completed">已完结</option>
                        <option value="dropped">已弃剧</option>
                        <option value="plan">想看</option>
                    </select>
                    
                    <select id="genre-filter" class="bg-slate-800/50 border border-slate-700 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                        <option value="all">全部类型</option>
                        <option value="剧情">剧情</option>
                        <option value="喜剧">喜剧</option>
                        <option value="悬疑">悬疑</option>
                        <option value="科幻">科幻</option>
                        <option value="动作">动作</option>
                    </select>
                </div>
            </div>
            
            <!-- 剧集分类标签 -->
            <div class="flex flex-wrap gap-2 mb-6">
                <button class="status-filter-btn bg-primary text-white px-4 py-1.5 rounded-full text-sm font-medium" data-status="all">全部</button>
                <button class="status-filter-btn bg-slate-800/50 hover:bg-slate-700/50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors" data-status="watching">正在追 (<span id="watching-count">0</span>)</button>
                <button class="status-filter-btn bg-slate-800/50 hover:bg-slate-700/50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors" data-status="completed">已完结 (<span id="completed-count">0</span>)</button>
                <button class="status-filter-btn bg-slate-800/50 hover:bg-slate-700/50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors" data-status="dropped">已弃剧 (<span id="dropped-count">0</span>)</button>
                <button class="status-filter-btn bg-slate-800/50 hover:bg-slate-700/50 px-4 py-1.5 rounded-full text-sm font-medium transition-colors" data-status="plan">想看 (<span id="plan-count">0</span>)</button>
            </div>
            
            <!-- 剧集列表 -->
            <div class="bg-slate-800/30 rounded-xl overflow-hidden border border-slate-700/50">
                <table class="w-full">
                    <thead>
                        <tr class="border-b border-slate-700/50 bg-slate-800/50">
                            <th class="text-left px-6 py-4 font-semibold">剧集</th>
                            <th class="text-left px-6 py-4 font-semibold hidden md:table-cell">类型</th>
                            <th class="text-left px-6 py-4 font-semibold">状态</th>
                            <th class="text-left px-6 py-4 font-semibold hidden sm:table-cell">进度</th>
                            <th class="text-left px-6 py-4 font-semibold">操作</th>
                        </tr>
                    </thead>
                    <tbody id="drama-table-body">
                        <!-- 剧集数据将通过JS动态生成 -->
                        <tr>
                            <td colspan="5" class="px-6 py-12 text-center text-slate-400">
                                <i class="fa fa-film text-5xl mb-4 opacity-30"></i>
                                <p>你的剧集收藏还是空的</p>
                                <button id="add-from-collection-btn" class="mt-4 bg-primary/20 hover:bg-primary/30 text-primary px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                                    添加剧集到收藏
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- 分页 -->
                <div class="px-6 py-4 border-t border-slate-700/50 flex justify-between items-center">
                    <p id="pagination-info" class="text-sm text-slate-400">显示 0-0 条，共 0 条</p>
                    <div class="flex space-x-1">
                        <button class="w-8 h-8 flex items-center justify-center rounded bg-slate-800/50 text-slate-400 hover:bg-primary hover:text-white transition-colors" disabled>
                            <i class="fa fa-chevron-left text-xs"></i>
                        </button>
                        <button class="w-8 h-8 flex items-center justify-center rounded bg-primary text-white">1</button>
                        <button class="w-8 h-8 flex items-center justify-center rounded bg-slate-800/50 hover:bg-primary hover:text-white transition-colors" disabled>
                            <i class="fa fa-chevron-right text-xs"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 好友区域 -->
        <section id="friends" class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">我的好友</h2>
                <button class="bg-primary hover:bg-primary/90 text-white font-medium px-4 py-2 rounded-lg transition-all flex items-center">
                    <i class="fa fa-user-plus mr-2"></i> 添加好友
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- 好友列表 -->
                <div class="md:col-span-2 bg-slate-800/30 rounded-xl overflow-hidden border border-slate-700/50">
                    <div class="p-4 border-b border-slate-700/50 bg-slate-800/50">
                        <h3 class="font-semibold">好友列表 (12)</h3>
                    </div>
                    
                    <div class="divide-y divide-slate-700/30">
                        <!-- 好友项 1 -->
                        <div class="p-4 hover:bg-slate-800/50 transition-colors flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="relative">
                                    <img src="https://picsum.photos/id/64/100" alt="李华" class="w-10 h-10 rounded-full object-cover">
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-800"></span>
                                </div>
                                <div class="ml-3">
                                    <h4 class="font-medium">李华</h4>
                                    <p class="text-xs text-slate-400">正在看《曼达洛人》</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="查看资料">
                                    <i class="fa fa-user"></i>
                                </button>
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="发送消息">
                                    <i class="fa fa-comment"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 好友项 2 -->
                        <div class="p-4 hover:bg-slate-800/50 transition-colors flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="relative">
                                    <img src="https://picsum.photos/id/65/100" alt="王芳" class="w-10 h-10 rounded-full object-cover">
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-800"></span>
                                </div>
                                <div class="ml-3">
                                    <h4 class="font-medium">王芳</h4>
                                    <p class="text-xs text-slate-400">刚刚更新了《老友记》进度</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="查看资料">
                                    <i class="fa fa-user"></i>
                                </button>
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="发送消息">
                                    <i class="fa fa-comment"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 好友项 3 -->
                        <div class="p-4 hover:bg-slate-800/50 transition-colors flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="relative">
                                    <img src="https://picsum.photos/id/91/100" alt="张伟" class="w-10 h-10 rounded-full object-cover">
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-slate-500 rounded-full border-2 border-slate-800"></span>
                                </div>
                                <div class="ml-3">
                                    <h4 class="font-medium">张伟</h4>
                                    <p class="text-xs text-slate-400">3天前在线</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="查看资料">
                                    <i class="fa fa-user"></i>
                                </button>
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="发送消息">
                                    <i class="fa fa-comment"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- 好友项 4 -->
                        <div class="p-4 hover:bg-slate-800/50 transition-colors flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="relative">
                                    <img src="https://picsum.photos/id/26/100" alt="刘梅" class="w-10 h-10 rounded-full object-cover">
                                    <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-slate-800"></span>
                                </div>
                                <div class="ml-3">
                                    <h4 class="font-medium">刘梅</h4>
                                    <p class="text-xs text-slate-400">推荐了《绝命毒师》</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="查看资料">
                                    <i class="fa fa-user"></i>
                                </button>
                                <button class="p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="发送消息">
                                    <i class="fa fa-comment"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4 border-t border-slate-700/50 text-center">
                        <a href="#" class="text-primary hover:text-primary/80 text-sm font-medium">查看全部好友</a>
                    </div>
                </div>
                
                <!-- 好友动态 -->
                <div class="bg-slate-800/30 rounded-xl overflow-hidden border border-slate-700/50">
                    <div class="p-4 border-b border-slate-700/50 bg-slate-800/50">
                        <h3 class="font-semibold">好友动态</h3>
                    </div>
                    
                    <div class="p-4 max-h-96 overflow-y-auto scrollbar-hide">
                        <!-- 动态项 1 -->
                        <div class="mb-6 pb-6 border-b border-slate-700/30 last:border-0 last:mb-0 last:pb-0">
                            <div class="flex items-start">
                                <img src="https://picsum.photos/id/65/100" alt="王芳" class="w-8 h-8 rounded-full object-cover mr-3">
                                <div>
                                    <p class="text-sm">
                                        <span class="font-medium">王芳</span>
                                        <span class="text-slate-400"> 更新了《老友记》的观看进度至 </span>
                                        <span class="text-primary">S05E12</span>
                                    </p>
                                    <p class="text-xs text-slate-500 mt-1">20分钟前</p>
                                    
                                    <div class="mt-3 bg-slate-800/50 rounded-lg p-3">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/id/237/100/150" alt="老友记" class="w-12 h-16 object-cover rounded mr-3">
                                            <div>
                                                <h4 class="font-medium text-sm">老友记</h4>
                                                <div class="w-32 bg-slate-700 rounded-full h-1.5 mt-1">
                                                    <div class="bg-primary h-1.5 rounded-full" style="width: 62%"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 动态项 2 -->
                        <div class="mb-6 pb-6 border-b border-slate-700/30 last:border-0 last:mb-0 last:pb-0">
                            <div class="flex items-start">
                                <img src="https://picsum.photos/id/64/100" alt="李华" class="w-8 h-8 rounded-full object-cover mr-3">
                                <div>
                                    <p class="text-sm">
                                        <span class="font-medium">李华</span>
                                        <span class="text-slate-400"> 评论了你的《曼达洛人》笔记：</span>
                                    </p>
                                    <p class="text-xs text-slate-500 mt-1">1小时前</p>
                                    
                                    <div class="mt-3 bg-slate-800/50 rounded-lg p-3">
                                        <p class="text-sm italic text-slate-300">"我也觉得这集的特效超棒！特别是飞船追逐那段"</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 动态项 3 -->
                        <div class="mb-6 pb-6 border-b border-slate-700/30 last:border-0 last:mb-0 last:pb-0">
                            <div class="flex items-start">
                                <img src="https://picsum.photos/id/26/100" alt="刘梅" class="w-8 h-8 rounded-full object-cover mr-3">
                                <div>
                                    <p class="text-sm">
                                        <span class="font-medium">刘梅</span>
                                        <span class="text-slate-400"> 向你推荐了剧集：</span>
                                        <span class="text-primary">绝命毒师</span>
                                    </p>
                                    <p class="text-xs text-slate-500 mt-1">3小时前</p>
                                    
                                    <div class="mt-3 bg-slate-800/50 rounded-lg p-3">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/id/111/100/150" alt="绝命毒师" class="w-12 h-16 object-cover rounded mr-3">
                                            <div>
                                                <h4 class="font-medium text-sm">绝命毒师</h4>
                                                <p class="text-xs text-slate-400 mt-1">
                                                    "这部剧的剧情超棒，人物塑造很立体，你一定会喜欢！"
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 动态项 4 -->
                        <div class="last:border-0 last:mb-0 last:pb-0">
                            <div class="flex items-start">
                                <img src="https://picsum.photos/id/64/100" alt="李华" class="w-8 h-8 rounded-full object-cover mr-3">
                                <div>
                                    <p class="text-sm">
                                        <span class="font-medium">李华</span>
                                        <span class="text-slate-400"> 完成了《权力的游戏》全季观看</span>
                                    </p>
                                    <p class="text-xs text-slate-500 mt-1">昨天</p>
                                    
                                    <div class="mt-3 bg-slate-800/50 rounded-lg p-3">
                                        <div class="flex items-center">
                                            <img src="https://picsum.photos/id/180/100/150" alt="权力的游戏" class="w-12 h-16 object-cover rounded mr-3">
                                            <div>
                                                <h4 class="font-medium text-sm">权力的游戏</h4>
                                                <div class="flex items-center mt-1">
                                                    <i class="fa fa-trophy text-yellow-500 mr-1"></i>
                                                    <span class="text-xs text-slate-300">获得了" binge-watcher "徽章</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 统计数据 -->
        <section id="statistics" class="mb-12">
            <h2 class="text-2xl font-bold mb-6">我的追剧统计</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <!-- 统计卡片 1 -->
                <div class="bg-gradient-to-br from-primary/20 to-primary/10 rounded-xl p-5 border border-primary/20">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-300 font-medium">总追剧数</h3>
                        <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center">
                            <i class="fa fa-film text-primary"></i>
                        </div>
                    </div>
                    <p id="total-dramas" class="text-3xl font-bold">0</p>
                    <p class="text-sm text-slate-400 mt-1">
                        <i class="fa fa-arrow-up text-green-400"></i> 较上月增长 0 部
                    </p>
                </div>
                
                <!-- 统计卡片 2 -->
                <div class="bg-gradient-to-br from-secondary/20 to-secondary/10 rounded-xl p-5 border border-secondary/20">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-300 font-medium">总观看时长</h3>
                        <div class="w-10 h-10 rounded-full bg-secondary/20 flex items-center justify-center">
                            <i class="fa fa-clock-o text-secondary"></i>
                        </div>
                    </div>
                    <p id="total-hours" class="text-3xl font-bold">0 小时</p>
                    <p class="text-sm text-slate-400 mt-1">
                        <i class="fa fa-arrow-up text-green-400"></i> 较上月增长 0 小时
                    </p>
                </div>
                
                <!-- 统计卡片 3 -->
                <div class="bg-gradient-to-br from-green-500/20 to-green-500/10 rounded-xl p-5 border border-green-500/20">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-300 font-medium">已完成</h3>
                        <div class="w-10 h-10 rounded-full bg-green-500/20 flex items-center justify-center">
                            <i class="fa fa-check text-green-500"></i>
                        </div>
                    </div>
                    <p id="completed-dramas" class="text-3xl font-bold">0 部</p>
                    <p class="text-sm text-slate-400 mt-1">
                        <i class="fa fa-arrow-up text-green-400"></i> 本月完成 0 部
                    </p>
                </div>
                
                <!-- 统计卡片 4 -->
                <div class="bg-gradient-to-br from-yellow-500/20 to-yellow-500/10 rounded-xl p-5 border border-yellow-500/20">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-slate-300 font-medium">正在追</h3>
                        <div class="w-10 h-10 rounded-full bg-yellow-500/20 flex items-center justify-center">
                            <i class="fa fa-spinner text-yellow-500"></i>
                        </div>
                    </div>
                    <p id="watching-dramas" class="text-3xl font-bold">0 部</p>
                    <p class="text-sm text-slate-400 mt-1">
                        <i class="fa fa-minus text-slate-400"></i> 与上月持平
                    </p>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- 图表 1：观看时长统计 -->
                <div class="lg:col-span-2 bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
                    <h3 class="font-semibold mb-4">近6个月观看时长</h3>
                    <div class="h-64">
                        <canvas id="watchTimeChart"></canvas>
                    </div>
                </div>
                
                <!-- 图表 2：剧集类型分布 -->
                <div class="bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
                    <h3 class="font-semibold mb-4">剧集类型分布</h3>
                    <div class="h-64 flex items-center justify-center">
                        <canvas id="genreChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- 页脚 -->
    <footer class="bg-slate-900/80 border-t border-slate-800">
        <div class="container mx-auto px-4 py-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center space-x-2 mb-4 md:mb-0">
                    <i class="fa fa-play-circle text-primary text-2xl"></i>
                    <h2 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-secondary">剧踪</h2>
                </div>
                
                <div class="flex space-x-6 mb-4 md:mb-0">
                    <a href="#" class="text-slate-400 hover:text-primary transition-colors">
                        <i class="fa fa-weibo text-xl"></i>
                    </a>
                    <a href="#" class="text-slate-400 hover:text-primary transition-colors">
                        <i class="fa fa-wechat text-xl"></i>
                    </a>
                    <a href="#" class="text-slate-400 hover:text-primary transition-colors">
                        <i class="fa fa-instagram text-xl"></i>
                    </a>
                    <a href="#" class="text-slate-400 hover:text-primary transition-colors">
                        <i class="fa fa-twitter text-xl"></i>
                    </a>
                </div>
                
                <div class="text-slate-500 text-sm">
                    &copy; 2023 剧踪 - 你的追剧记录助手 版权所有
                </div>
            </div>
        </div>
    </footer>
    
    <!-- 添加/编辑剧集模态框 -->
    <div id="drama-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-slate-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-slate-700/50 flex justify-between items-center sticky top-0 bg-slate-800 z-10">
                <h3 id="modal-title" class="text-xl font-bold">添加新剧集</h3>
                <button id="close-modal-btn" class="text-slate-400 hover:text-white transition-colors">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <form id="drama-form">
                    <input type="hidden" id="drama-id">
                    
                    <div class="mb-5">
                        <label class="block text-sm font-medium mb-2" for="drama-title">剧集名称 <span class="text-red-400">*</span></label>
                        <input type="text" id="drama-title" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="输入剧集名称" required>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5">
                        <div>
                            <label class="block text-sm font-medium mb-2" for="drama-platform">播出平台</label>
                            <select id="drama-platform" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary">
                                <option value="">请选择平台</option>
                                <option value="netflix">Netflix</option>
                                <option value="tencent">腾讯视频</option>
                                <option value="iqiyi">爱奇艺</option>
                                <option value="youku">优酷</option>
                                <option value="bilibili">哔哩哔哩</option>
                                <option value="other">其他平台</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2" for="drama-status">观看状态 <span class="text-red-400">*</span></label>
                            <select id="drama-status" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" required>
                                <option value="watching">正在追</option>
                                <option value="completed">已完结</option>
                                <option value="dropped">已弃剧</option>
                                <option value="plan">想看</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5">
                        <div>
                            <label class="block text-sm font-medium mb-2" for="drama-current">当前进度</label>
                            <input type="text" id="drama-current" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="例如：S01E05">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2" for="drama-genre">剧集类型</label>
                            <input type="text" id="drama-genre" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="例如：剧情, 悬疑">
                        </div>
                    </div>
                    
                    <div class="mb-5">
                        <label class="block text-sm font-medium mb-2" for="drama-progress">观看进度 (%)</label>
                        <input type="range" id="drama-progress" min="0" max="100" value="0" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary">
                        <div class="flex justify-between text-xs text-slate-400 mt-1">
                            <span>0%</span>
                            <span id="progress-value">0%</span>
                            <span>100%</span>
                        </div>
                    </div>
                    
                    <div class="mb-5">
                        <label class="block text-sm font-medium mb-2" for="drama-hours">观看时长 (小时)</label>
                        <input type="number" id="drama-hours" min="0" step="0.5" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="输入观看时长">
                    </div>
                    
                    <div class="mb-5">
                        <label class="block text-sm font-medium mb-2" for="drama-notes">剧情笔记</label>
                        <textarea id="drama-notes" rows="4" class="w-full bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary" placeholder="记录一些剧情要点或个人感受..."></textarea>
                    </div>
                    
                    <div class="mb-5">
                        <label class="block text-sm font-medium mb-2">是否接收更新提醒</label>
                        <div class="flex items-center">
                            <input type="checkbox" id="drama-reminder" class="w-4 h-4 bg-slate-700 border-slate-600 rounded focus:ring-primary">
                            <label for="drama-reminder" class="ml-2 text-sm">当有新集更新时通知我</label>
                        </div>
                    </div>
                    
                    <div class="flex justify-end space-x-3">
                        <button type="button" id="cancel-btn" class="px-6 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition-colors">取消</button>
                        <button type="submit" class="px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition-colors">保存剧集</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- 剧集详情模态框 -->
    <div id="detail-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-slate-800 rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-slate-700/50 flex justify-between items-center sticky top-0 bg-slate-800 z-10">
                <h3 id="detail-title" class="text-xl font-bold">剧集详情</h3>
                <button id="close-detail-btn" class="text-slate-400 hover:text-white transition-colors">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="p-6">
                <div id="detail-content" class="space-y-6">
                    <!-- 详情内容将通过JS动态生成 -->
                </div>
                
                <div class="flex justify-end space-x-3 mt-8">
                    <button id="edit-from-detail-btn" class="px-6 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition-colors">编辑剧集</button>
                    <button id="close-detail-btn-2" class="px-6 py-3 bg-primary hover:bg-primary/90 text-white rounded-lg font-medium transition-colors">关闭</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 用户管理
        const UserManager = {
            // 初始化用户系统
            init() {
                const currentUser = this.getCurrentUser();
                if (!currentUser) {
                    // 如果没有登录用户，显示登录模态框
                    document.getElementById('login-modal').classList.remove('hidden');
                    document.body.style.overflow = 'hidden';
                } else {
                    // 更新UI显示当前用户
                    this.updateUserUI(currentUser);
                }
                
                // 绑定登录表单事件
                this.bindEvents();
            },
            
            // 获取当前登录用户
            getCurrentUser() {
                return JSON.parse(localStorage.getItem('currentUser'));
            },
            
            // 设置当前登录用户
            setCurrentUser(user) {
                localStorage.setItem('currentUser', JSON.stringify(user));
                this.updateUserUI(user);
                
                // 隐藏登录模态框
                document.getElementById('login-modal').classList.add('hidden');
                document.body.style.overflow = '';
                
                // 重新初始化剧集数据
                DramaManager.init();
            },
            
            // 退出登录
            logout() {
                localStorage.removeItem('currentUser');
                
                // 显示登录模态框
                document.getElementById('login-modal').classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            },
            
            // 更新用户UI显示
            updateUserUI(user) {
                document.getElementById('user-name').textContent = user.name;
                document.getElementById('welcome-username').textContent = user.name;
                document.getElementById('user-avatar').src = user.avatar;
                document.getElementById('user-avatar').alt = user.name;
            },
            
            // 绑定事件
            bindEvents() {
                // 登录表单提交
                document.getElementById('login-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    const username = document.getElementById('username').value;
                    
                    // 创建用户对象（实际应用中应该通过API验证）
                    const user = {
                        name: username,
                        avatar: `https://picsum.photos/id/${username.charCodeAt(0) % 100}/200`
                    };
                    
                    this.setCurrentUser(user);
                    document.getElementById('login-form').reset();
                });
                
                // 测试用户登录
                document.querySelectorAll('.test-user-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const userName = btn.getAttribute('data-user');
                        const user = {
                            name: userName,
                            avatar: `https://picsum.photos/id/${userName.charCodeAt(0) % 100}/200`
                        };
                        
                        this.setCurrentUser(user);
                        document.getElementById('login-form').reset();
                    });
                });
                
                // 退出登录
                document.getElementById('logout-btn').addEventListener('click', () => {
                    if (confirm('确定要退出登录吗？')) {
                        this.logout();
                    }
                });
            }
        };
        
        // 数据管理
        const DramaManager = {
            // 初始化数据
            init() {
                const currentUser = UserManager.getCurrentUser();
                if (!currentUser) return;
                
                // 为每个用户创建独立的存储空间
                const userId = currentUser.name;
                const userDramasKey = `dramas_${userId}`;
                
                const dramas = localStorage.getItem(userDramasKey);
                if (!dramas) {
                    localStorage.setItem(userDramasKey, JSON.stringify([]));
                }
                
                // 添加示例数据（如果没有数据的话）
                const initialDramas = JSON.parse(localStorage.getItem(userDramasKey));
                if (initialDramas.length === 0) {
                    this.addSampleData();
                }
                
                this.renderAll();
            },
            
            // 获取当前用户的剧集存储键
            getUserDramasKey() {
                const currentUser = UserManager.getCurrentUser();
                return currentUser ? `dramas_${currentUser.name}` : null;
            },
            
            // 添加示例数据
            addSampleData() {
                const userDramasKey = this.getUserDramasKey();
                if (!userDramasKey) return;
                
                const sampleData = [
                    {
                        id: Date.now() - 10000,
                        title: "绝命毒师",
                        platform: "netflix",
                        status: "watching",
                        current: "S02E05",
                        genre: "剧情, 犯罪",
                        progress: 35,
                        hours: 18,
                        notes: "讲述了一位普通的高中化学老师在得知自己身患绝症后，为了给家人留下财产，而利用自己超凡的化学知识制造毒品，并成为世界顶级毒王的传奇犯罪故事。",
                        reminder: true,
                        createdAt: Date.now() - 30 * 24 * 60 * 60 * 1000,
                        updatedAt: Date.now() - 2 * 24 * 60 * 60 * 1000
                    },
                    {
                        id: Date.now() - 9000,
                        title: "老友记",
                        platform: "other",
                        status: "watching",
                        current: "S05E12",
                        genre: "喜剧, 爱情",
                        progress: 62,
                        hours: 45,
                        notes: "讲述了居住在纽约的六位好朋友从相识到后来一起经历了10年的生活中发生的一系列的故事。",
                        reminder: true,
                        createdAt: Date.now() - 45 * 24 * 60 * 60 * 1000,
                        updatedAt: Date.now() - 1 * 24 * 60 * 60 * 1000
                    },
                    {
                        id: Date.now() - 8000,
                        title: "曼达洛人",
                        platform: "netflix",
                        status: "watching",
                        current: "S01E03",
                        genre: "科幻, 动作",
                        progress: 25,
                        hours: 7,
                        notes: "故事的时间线设置在帝国解体后，一位独行的枪手曼达洛人在银河系边远的星球之间穿梭。",
                        reminder: true,
                        createdAt: Date.now() - 15 * 24 * 60 * 60 * 1000,
                        updatedAt: Date.now() - 3 * 24 * 60 * 60 * 1000
                    },
                    {
                        id: Date.now() - 7000,
                        title: "权力的游戏",
                        platform: "tencent",
                        status: "completed",
                        current: "全季完结",
                        genre: "奇幻, 冒险",
                        progress: 100,
                        hours: 52,
                        notes: "一场史诗般的权力斗争，七个王国争夺铁王座的故事。",
                        reminder: false,
                        createdAt: Date.now() - 90 * 24 * 60 * 60 * 1000,
                        updatedAt: Date.now() - 60 * 24 * 60 * 60 * 1000
                    },
                    {
                        id: Date.now() - 6000,
                        title: "破产姐妹",
                        platform: "iqiyi",
                        status: "dropped",
                        current: "S03E02",
                        genre: "喜剧",
                        progress: 30,
                        hours: 12,
                        notes: "两个身份背景完全不同的都市女孩在纽约一起打拼的故事。",
                        reminder: false,
                        createdAt: Date.now() - 60 * 24 * 60 * 60 * 1000,
                        updatedAt: Date.now() - 45 * 24 * 60 * 60 * 1000
                    }
                ];
                
                localStorage.setItem(userDramasKey, JSON.stringify(sampleData));
            },
            
            // 获取所有剧集
            getAll() {
                const userDramasKey = this.getUserDramasKey();
                if (!userDramasKey) return [];
                
                return JSON.parse(localStorage.getItem(userDramasKey)) || [];
            },
            
            // 获取单个剧集
            getById(id) {
                const dramas = this.getAll();
                return dramas.find(drama => drama.id === id);
            },
            
            // 添加新剧集
            add(drama) {
                const userDramasKey = this.getUserDramasKey();
                if (!userDramasKey) return null;
                
                const dramas = this.getAll();
                const newDrama = {
                    id: Date.now(),
                    createdAt: Date.now(),
                    updatedAt: Date.now(),
                    ...drama
                };
                
                dramas.push(newDrama);
                localStorage.setItem(userDramasKey, JSON.stringify(dramas));
                this.renderAll();
                return newDrama;
            },
            
            // 更新剧集
            update(id, updatedData) {
                const userDramasKey = this.getUserDramasKey();
                if (!userDramasKey) return null;
                
                const dramas = this.getAll();
                const index = dramas.findIndex(drama => drama.id === id);
                
                if (index !== -1) {
                    dramas[index] = {
                        ...dramas[index],
                        ...updatedData,
                        updatedAt: Date.now()
                    };
                    
                    localStorage.setItem(userDramasKey, JSON.stringify(dramas));
                    this.renderAll();
                    return dramas[index];
                }
                
                return null;
            },
            
            // 删除剧集
            delete(id) {
                const userDramasKey = this.getUserDramasKey();
                if (!userDramasKey) return;
                
                let dramas = this.getAll();
                dramas = dramas.filter(drama => drama.id !== id);
                localStorage.setItem(userDramasKey, JSON.stringify(dramas));
                this.renderAll();
            },
            
            // 获取状态统计
            getStatusCounts() {
                const dramas = this.getAll();
                const counts = {
                    watching: 0,
                    completed: 0,
                    dropped: 0,
                    plan: 0,
                    total: dramas.length
                };
                
                dramas.forEach(drama => {
                    if (counts.hasOwnProperty(drama.status)) {
                        counts[drama.status]++;
                    }
                });
                
                return counts;
            },
            
            // 获取正在更新的剧集数量
            getUpdatingCount() {
                const dramas = this.getAll();
                return dramas.filter(drama => drama.status === 'watching' && drama.reminder).length;
            },
            
            // 获取观看时长总和
            getTotalHours() {
                const dramas = this.getAll();
                return dramas.reduce((total, drama) => total + (drama.hours || 0), 0);
            },
            
            // 获取类型分布
            getGenreDistribution() {
                const dramas = this.getAll();
                const genres = {};
                
                dramas.forEach(drama => {
                    if (drama.genre) {
                        const genreList = drama.genre.split(',').map(g => g.trim());
                        genreList.forEach(genre => {
                            if (genres[genre]) {
                                genres[genre]++;
                            } else {
                                genres[genre] = 1;
                            }
                        });
                    }
                });
                
                return genres;
            },
            
            // 获取最近6个月的观看时长数据
            getMonthlyHours() {
                const dramas = this.getAll();
                const months = [];
                const now = new Date();
                
                // 生成最近6个月的标签
                for (let i = 5; i >= 0; i--) {
                    const month = new Date();
                    month.setMonth(now.getMonth() - i);
                    months.push(month.toLocaleString('default', { month: 'short' }));
                }
                
                // 初始化每月数据为0
                const monthlyData = months.reduce((acc, month) => {
                    acc[month] = 0;
                    return acc;
                }, {});
                
                // 简单模拟：将总时长平均分配到最近几个月
                const totalHours = this.getTotalHours();
                if (totalHours > 0) {
                    const hoursPerMonth = totalHours / months.length;
                    months.forEach(month => {
                        monthlyData[month] = Math.round(hoursPerMonth * (0.8 + Math.random() * 0.4));
                    });
                }
                
                return {
                    labels: months,
                    data: months.map(month => monthlyData[month])
                };
            },
            
            // 渲染所有视图
            renderAll() {
                this.renderDramaTable();
                this.renderContinueWatching();
                this.renderRecentUpdates();
                this.renderStatistics();
                this.updateStatusCounts();
            },
            
            // 渲染剧集表格
            renderDramaTable() {
                const dramas = this.getAll();
                const tableBody = document.getElementById('drama-table-body');
                const statusFilter = document.getElementById('status-filter').value;
                const genreFilter = document.getElementById('genre-filter').value;
                const searchTerm = document.getElementById('drama-search').value.toLowerCase();
                
                // 过滤剧集
                let filteredDramas = dramas;
                
                if (statusFilter !== 'all') {
                    filteredDramas = filteredDramas.filter(drama => drama.status === statusFilter);
                }
                
                if (genreFilter !== 'all') {
                    filteredDramas = filteredDramas.filter(drama => 
                        drama.genre && drama.genre.toLowerCase().includes(genreFilter.toLowerCase())
                    );
                }
                
                if (searchTerm) {
                    filteredDramas = filteredDramas.filter(drama => 
                        drama.title.toLowerCase().includes(searchTerm) || 
                        drama.genre.toLowerCase().includes(searchTerm)
                    );
                }
                
                // 更新分页信息
                document.getElementById('pagination-info').textContent = 
                    `显示 1-${filteredDramas.length} 条，共 ${dramas.length} 条`;
                
                // 清空表格
                tableBody.innerHTML = '';
                
                if (filteredDramas.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="5" class="px-6 py-12 text-center text-slate-400">
                                <i class="fa fa-film text-5xl mb-4 opacity-30"></i>
                                <p>没有找到匹配的剧集</p>
                                <button id="add-from-empty-btn" class="mt-4 bg-primary/20 hover:bg-primary/30 text-primary px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                                    添加新剧集
                                </button>
                            </td>
                        </tr>
                    `;
                    
                    // 添加事件监听
                    document.getElementById('add-from-empty-btn').addEventListener('click', openAddModal);
                    return;
                }
                
                // 生成表格行
                filteredDramas.forEach(drama => {
                    const row = document.createElement('tr');
                    row.className = 'border-b border-slate-700/30 hover:bg-slate-800/50 transition-colors';
                    
                    // 状态标签样式
                    let statusClass = '';
                    let statusText = '';
                    
                    switch(drama.status) {
                        case 'watching':
                            statusClass = 'bg-yellow-900/30 text-yellow-300';
                            statusText = '正在追';
                            break;
                        case 'completed':
                            statusClass = 'bg-green-900/30 text-green-300';
                            statusText = '已完结';
                            break;
                        case 'dropped':
                            statusClass = 'bg-red-900/30 text-red-300';
                            statusText = '已弃剧';
                            break;
                        case 'plan':
                            statusClass = 'bg-blue-900/30 text-blue-300';
                            statusText = '想看';
                            break;
                    }
                    
                    // 生成类型标签
                    let genreTags = '';
                    if (drama.genre) {
                        const genres = drama.genre.split(',').map(g => g.trim());
                        const genreColors = {
                            '剧情': 'blue',
                            '喜剧': 'purple',
                            '悬疑': 'gray',
                            '科幻': 'indigo',
                            '动作': 'red',
                            '爱情': 'pink',
                            '犯罪': 'green',
                            '奇幻': 'gray',
                            '冒险': 'red'
                        };
                        
                        genres.forEach(genre => {
                            const color = genreColors[genre] || 'slate';
                            genreTags += `<span class="bg-${color}-900/30 text-${color}-300 text-xs px-2 py-1 rounded-full mr-2">${genre}</span>`;
                        });
                    }
                    
                    // 进度条颜色
                    let progressColor = 'primary';
                    if (drama.status === 'completed') progressColor = 'green-500';
                    if (drama.status === 'dropped') progressColor = 'red-500';
                    
                    row.innerHTML = `
                        <td class="px-6 py-4">
                            <div class="flex items-center">
                                <img src="https://picsum.photos/id/${drama.id % 100}/100/150" alt="${drama.title}" class="w-12 h-16 object-cover rounded mr-4">
                                <div>
                                    <h4 class="font-medium">${drama.title}</h4>
                                    <p class="text-sm text-slate-400">${drama.current || '未设置'}</p>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 hidden md:table-cell">
                            ${genreTags || '<span class="text-slate-400 text-xs">未设置</span>'}
                        </td>
                        <td class="px-6 py-4">
                            <span class="${statusClass} text-xs px-2 py-1 rounded-full">${statusText}</span>
                        </td>
                        <td class="px-6 py-4 hidden sm:table-cell">
                            <div class="w-24 bg-slate-700 rounded-full h-1.5">
                                <div class="bg-${progressColor} h-1.5 rounded-full" style="width: ${drama.progress || 0}%"></div>
                            </div>
                            <span class="text-xs text-slate-400 mt-1 block">${drama.progress || 0}%</span>
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex space-x-2">
                                <button class="edit-drama p-1.5 text-primary hover:bg-primary/20 rounded transition-colors" title="编辑" data-id="${drama.id}">
                                    <i class="fa fa-pencil"></i>
                                </button>
                                <button class="view-detail p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="详情" data-id="${drama.id}">
                                    <i class="fa fa-info-circle"></i>
                                </button>
                                <button class="share-drama p-1.5 text-slate-400 hover:bg-slate-700 rounded transition-colors" title="分享" data-id="${drama.id}">
                                    <i class="fa fa-share-alt"></i>
                                </button>
                                <button class="delete-drama p-1.5 text-slate-400 hover:bg-red-500/20 hover:text-red-400 rounded transition-colors" title="删除" data-id="${drama.id}">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // 添加事件监听
                document.querySelectorAll('.edit-drama').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        openEditModal(id);
                    });
                });
                
                document.querySelectorAll('.view-detail').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        openDetailModal(id);
                    });
                });
                
                document.querySelectorAll('.delete-drama').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        if (confirm('确定要删除这部剧集吗？')) {
                            this.delete(id);
                        }
                    });
                });
                
                document.querySelectorAll('.share-drama').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        const drama = this.getById(id);
                        alert(`已复制《${drama.title}》的分享链接到剪贴板！`);
                    });
                });
            },
            
            // 渲染继续观看区域
            renderContinueWatching() {
                const dramas = this.getAll();
                const container = document.getElementById('continue-watching-container');
                
                // 筛选出正在追的剧集，并按最近更新排序
                const watchingDramas = dramas
                    .filter(drama => drama.status === 'watching')
                    .sort((a, b) => b.updatedAt - a.updatedAt)
                    .slice(0, 4);
                
                // 清空容器
                container.innerHTML = '';
                
                if (watchingDramas.length === 0) {
                    container.innerHTML = `
                        <div class="col-span-full text-center py-12 text-slate-400">
                            <i class="fa fa-film text-5xl mb-4 opacity-30"></i>
                            <p>还没有正在追的剧集</p>
                            <button id="add-first-drama-btn" class="mt-4 bg-primary/20 hover:bg-primary/30 text-primary px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                                添加你的第一部剧集
                            </button>
                        </div>
                    `;
                    
                    // 添加事件监听
                    document.getElementById('add-first-drama-btn').addEventListener('click', openAddModal);
                    return;
                }
                
                // 生成继续观看的剧集卡片
                watchingDramas.forEach(drama => {
                    const card = document.createElement('div');
                    card.className = 'drama-card bg-slate-800/50 rounded-xl overflow-hidden shadow-lg hover:shadow-primary/20 transition-all duration-300 transform hover:-translate-y-1 border border-slate-700/50';
                    
                    card.innerHTML = `
                        <div class="relative">
                            <img src="https://picsum.photos/id/${drama.id % 100}/400/225" alt="${drama.title}" class="w-full h-48 object-cover">
                            <div class="absolute top-3 right-3 bg-primary/90 text-white text-xs font-bold px-2 py-1 rounded-full">
                                ${drama.current || '未知'}
                            </div>
                            <div class="absolute inset-0 bg-gradient-to-t from-slate-900 to-transparent opacity-70"></div>
                        </div>
                        <div class="p-4">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-bold text-lg">${drama.title}</h4>
                                <div class="flex items-center text-yellow-400 text-sm">
                                    <i class="fa fa-star"></i>
                                    <span class="ml-1 text-white">${(7 + Math.random() * 2).toFixed(1)}</span>
                                </div>
                            </div>
                            <p class="text-slate-400 text-sm mb-4 line-clamp-2">
                                ${drama.notes || '暂无剧情介绍'}
                            </p>
                            <div class="w-full bg-slate-700 rounded-full h-2 mb-3">
                                <div class="bg-primary h-2 rounded-full" style="width: ${drama.progress || 0}%"></div>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs text-slate-400">${drama.progress || 0}% 已观看</span>
                                <button class="continue-watching-btn bg-primary/20 hover:bg-primary/30 text-primary px-3 py-1 rounded-lg text-sm font-medium transition-colors" data-id="${drama.id}">
                                    继续观看
                                </button>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
                
                // 添加继续观看按钮事件
                document.querySelectorAll('.continue-watching-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        // 这里可以添加继续观看的逻辑，比如更新进度等
                        alert(`正在播放《${this.getById(id).title}》${this.getById(id).current}`);
                    });
                });
            },
            
            // 渲染最近更新区域
            renderRecentUpdates() {
                const dramas = this.getAll();
                const container = document.querySelector('#recent-updates-container > div');
                
                // 筛选出最近更新的剧集
                const recentDramas = dramas
                    .filter(drama => drama.status !== 'plan')
                    .sort((a, b) => b.updatedAt - a.updatedAt)
                    .slice(0, 5);
                
                // 清空容器
                container.innerHTML = '';
                
                if (recentDramas.length === 0) {
                    container.innerHTML = `
                        <div class="bg-slate-800/50 rounded-xl overflow-hidden shadow-lg w-64 border border-slate-700/50">
                            <div class="p-4 text-center">
                                <p class="text-sm text-slate-400">暂无更新记录</p>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                // 生成最近更新的剧集卡片
                recentDramas.forEach(drama => {
                    // 状态文本
                    let statusText = '';
                    switch(drama.status) {
                        case 'watching':
                            statusText = `更新至 ${drama.current}`;
                            break;
                        case 'completed':
                            statusText = '已完结';
                            break;
                        case 'dropped':
                            statusText = '已标记为弃剧';
                            break;
                    }
                    
                    const card = document.createElement('div');
                    card.className = 'bg-slate-800/50 rounded-xl overflow-hidden shadow-lg w-64 hover:shadow-primary/20 transition-all duration-300 border border-slate-700/50';
                    
                    card.innerHTML = `
                        <div class="relative">
                            <img src="https://picsum.photos/id/${drama.id % 100}/300/170" alt="${drama.title}" class="w-full h-36 object-cover">
                            <div class="absolute top-2 right-2 bg-secondary text-white text-xs font-bold px-2 py-1 rounded-full animate-pulse">
                                新更新
                            </div>
                        </div>
                        <div class="p-3">
                            <h4 class="font-bold text-base mb-1">${drama.title}</h4>
                            <p class="text-xs text-slate-400 mb-2">${statusText}</p>
                            <button class="view-detail-update w-full bg-secondary/20 hover:bg-secondary/30 text-secondary text-xs font-medium py-1.5 rounded-lg transition-colors" data-id="${drama.id}">
                                查看详情
                            </button>
                        </div>
                    `;
                    
                    container.appendChild(card);
                });
                
                // 添加查看详情事件
                document.querySelectorAll('.view-detail-update').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const id = parseInt(btn.getAttribute('data-id'));
                        openDetailModal(id);
                    });
                });
            },
            
            // 渲染统计数据
            renderStatistics() {
                const counts = this.getStatusCounts();
                const totalHours = this.getTotalHours();
                const monthlyData = this.getMonthlyHours();
                const genreData = this.getGenreDistribution();
                
                // 更新统计卡片
                document.getElementById('total-dramas').textContent = counts.total;
                document.getElementById('total-hours').textContent = totalHours + ' 小时';
                document.getElementById('completed-dramas').textContent = counts.completed + ' 部';
                document.getElementById('watching-dramas').textContent = counts.watching + ' 部';
                document.getElementById('updating-count').textContent = this.getUpdatingCount() + ' 部';
                
                // 更新状态计数标签
                document.getElementById('watching-count').textContent = counts.watching;
                document.getElementById('completed-count').textContent = counts.completed;
                document.getElementById('dropped-count').textContent = counts.dropped;
                document.getElementById('plan-count').textContent = counts.plan;
                
                // 更新观看时长图表
                const watchTimeCtx = document.getElementById('watchTimeChart').getContext('2d');
                if (window.watchTimeChart) {
                    window.watchTimeChart.data.datasets[0].data = monthlyData.data;
                    window.watchTimeChart.data.labels = monthlyData.labels;
                    window.watchTimeChart.update();
                } else {
                    window.watchTimeChart = new Chart(watchTimeCtx, {
                        type: 'line',
                        data: {
                            labels: monthlyData.labels,
                            datasets: [{
                                label: '观看时长 (小时)',
                                data: monthlyData.data,
                                borderColor: '#6366f1',
                                backgroundColor: 'rgba(99, 102, 241, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: 'rgba(255, 255, 255, 0.05)'
                                    },
                                    ticks: {
                                        color: 'rgba(255, 255, 255, 0.7)'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: 'rgba(255, 255, 255, 0.05)'
                                    },
                                    ticks: {
                                        color: 'rgba(255, 255, 255, 0.7)'
                                    }
                                }
                            }
                        }
                    });
                }
                
                // 更新类型分布图表
                const genreCtx = document.getElementById('genreChart').getContext('2d');
                const genreLabels = Object.keys(genreData);
                const genreValues = Object.values(genreData);
                const colors = [
                    '#6366f1', '#ec4899', '#10b981', '#f59e0b', 
                    '#ef4444', '#6b7280', '#8b5cf6', '#ec4899'
                ];
                
                if (window.genreChart) {
                    window.genreChart.data.labels = genreLabels;
                    window.genreChart.data.datasets[0].data = genreValues;
                    window.genreChart.update();
                } else {
                    window.genreChart = new Chart(genreCtx, {
                        type: 'doughnut',
                        data: {
                            labels: genreLabels,
                            datasets: [{
                                data: genreValues,
                                backgroundColor: colors.slice(0, genreLabels.length),
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'bottom',
                                    labels: {
                                        color: 'rgba(255, 255, 255, 0.7)',
                                        padding: 15,
                                        font: {
                                            size: 11
                                        }
                                    }
                                }
                            },
                            cutout: '65%'
                        }
                    });
                }
            },
            
            // 更新状态计数
            updateStatusCounts() {
                const counts = this.getStatusCounts();
                
                document.getElementById('watching-count').textContent = counts.watching;
                document.getElementById('completed-count').textContent = counts.completed;
                document.getElementById('dropped-count').textContent = counts.dropped;
                document.getElementById('plan-count').textContent = counts.plan;
            }
        };
        
        // 导航栏滚动效果
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('bg-dark/90', 'shadow-lg');
                navbar.classList.remove('bg-transparent');
            } else {
                navbar.classList.remove('bg-dark/90', 'shadow-lg');
            }
        });
        
        // 移动端菜单切换
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
        
        // 模态框控制
        const dramaModal = document.getElementById('drama-modal');
        const detailModal = document.getElementById('detail-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const dramaForm = document.getElementById('drama-form');
        const progressInput = document.getElementById('drama-progress');
        const progressValue = document.getElementById('progress-value');
        const closeDetailBtn = document.getElementById('close-detail-btn');
        const closeDetailBtn2 = document.getElementById('close-detail-btn-2');
        const editFromDetailBtn = document.getElementById('edit-from-detail-btn');
        let currentDramaId = null;
        
        // 打开添加剧集模态框
        function openAddModal() {
            document.getElementById('modal-title').textContent = '添加新剧集';
            dramaForm.reset();
            document.getElementById('drama-id').value = '';
            progressValue.textContent = '0%';
            currentDramaId = null;
            dramaModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // 打开编辑剧集模态框
        function openEditModal(id) {
            const drama = DramaManager.getById(id);
            if (!drama) return;
            
            currentDramaId = id;
            document.getElementById('modal-title').textContent = '编辑剧集';
            document.getElementById('drama-id').value = id;
            document.getElementById('drama-title').value = drama.title;
            document.getElementById('drama-platform').value = drama.platform || '';
            document.getElementById('drama-status').value = drama.status;
            document.getElementById('drama-current').value = drama.current || '';
            document.getElementById('drama-genre').value = drama.genre || '';
            document.getElementById('drama-progress').value = drama.progress || 0;
            document.getElementById('drama-hours').value = drama.hours || 0;
            document.getElementById('drama-notes').value = drama.notes || '';
            document.getElementById('drama-reminder').checked = drama.reminder || false;
            
            progressValue.textContent = `${drama.progress || 0}%`;
            
            dramaModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // 打开详情模态框
        function openDetailModal(id) {
            const drama = DramaManager.getById(id);
            if (!drama) return;
            
            currentDramaId = id;
            document.getElementById('detail-title').textContent = drama.title;
            
            // 状态文本和样式
            let statusClass = '';
            let statusText = '';
            
            switch(drama.status) {
                case 'watching':
                    statusClass = 'bg-yellow-900/30 text-yellow-300';
                    statusText = '正在追';
                    break;
                case 'completed':
                    statusClass = 'bg-green-900/30 text-green-300';
                    statusText = '已完结';
                    break;
                case 'dropped':
                    statusClass = 'bg-red-900/30 text-red-300';
                    statusText = '已弃剧';
                    break;
                case 'plan':
                    statusClass = 'bg-blue-900/30 text-blue-300';
                    statusText = '想看';
                    break;
            }
            
            // 平台文本
            const platformMap = {
                'netflix': 'Netflix',
                'tencent': '腾讯视频',
                'iqiyi': '爱奇艺',
                'youku': '优酷',
                'bilibili': '哔哩哔哩',
                'other': '其他平台'
            };
            const platformText = platformMap[drama.platform] || '未设置';
            
            // 生成类型标签
            let genreTags = '';
            if (drama.genre) {
                const genres = drama.genre.split(',').map(g => g.trim());
                genres.forEach(genre => {
                    genreTags += `<span class="bg-slate-700 text-slate-200 text-xs px-2 py-1 rounded-full mr-2">${genre}</span>`;
                });
            }
            
            // 格式化日期
            const formatDate = (timestamp) => {
                const date = new Date(timestamp);
                return date.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            };
            
            // 更新详情内容
            document.getElementById('detail-content').innerHTML = `
                <div class="flex flex-col md:flex-row gap-6">
                    <img src="https://picsum.photos/id/${drama.id % 100}/400/600" alt="${drama.title}" class="w-full md:w-1/3 rounded-lg object-cover">
                    
                    <div class="space-y-4">
                        <div>
                            <h4 class="text-sm text-slate-400">状态</h4>
                            <span class="${statusClass} text-sm px-3 py-1 rounded-full">${statusText}</span>
                        </div>
                        
                        <div>
                            <h4 class="text-sm text-slate-400">当前进度</h4>
                            <p class="font-medium">${drama.current || '未设置'}</p>
                        </div>
                        
                        <div>
                            <h4 class="text-sm text-slate-400">观看进度</h4>
                            <div class="w-full bg-slate-700 rounded-full h-2 mt-1">
                                <div class="bg-primary h-2 rounded-full" style="width: ${drama.progress || 0}%"></div>
                            </div>
                            <p class="text-sm mt-1">${drama.progress || 0}%</p>
                        </div>
                        
                        <div>
                            <h4 class="text-sm text-slate-400">播出平台</h4>
                            <p class="font-medium">${platformText}</p>
                        </div>
                        
                        <div>
                            <h4 class="text-sm text-slate-400">剧集类型</h4>
                            <div class="flex flex-wrap mt-1">
                                ${genreTags || '<span class="text-slate-400 text-sm">未设置</span>'}
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="text-sm text-slate-400">观看时长</h4>
                            <p class="font-medium">${drama.hours || 0} 小时</p>
                        </div>
                        
                        <div>
                            <h4 class="text-sm text-slate-400">更新提醒</h4>
                            <p class="font-medium">${drama.reminder ? '已开启' : '已关闭'}</p>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <h4 class="text-sm text-slate-400">添加时间</h4>
                                <p class="font-medium">${formatDate(drama.createdAt)}</p>
                            </div>
                            <div>
                                <h4 class="text-sm text-slate-400">最近更新</h4>
                                <p class="font-medium">${formatDate(drama.updatedAt)}</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 class="text-sm text-slate-400 mb-2">剧情笔记</h4>
                    <div class="bg-slate-700/30 rounded-lg p-4">
                        <p class="${!drama.notes ? 'text-slate-500 italic' : ''}">${drama.notes || '暂无笔记内容'}</p>
                    </div>
                </div>
            `;
            
            detailModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        // 关闭模态框
        function closeModal() {
            dramaModal.classList.add('hidden');
            document.body.style.overflow = '';
        }
        
        // 关闭详情模态框
        function closeDetailModal() {
            detailModal.classList.add('hidden');
            document.body.style.overflow = '';
        }
        
        // 进度条值显示
        progressInput.addEventListener('input', function() {
            progressValue.textContent = `${this.value}%`;
        });
        
        // 表单提交处理
        dramaForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const dramaData = {
                title: document.getElementById('drama-title').value,
                platform: document.getElementById('drama-platform').value,
                status: document.getElementById('drama-status').value,
                current: document.getElementById('drama-current').value,
                genre: document.getElementById('drama-genre').value,
                progress: parseInt(document.getElementById('drama-progress').value) || 0,
                hours: parseFloat(document.getElementById('drama-hours').value) || 0,
                notes: document.getElementById('drama-notes').value,
                reminder: document.getElementById('drama-reminder').checked
            };
            
            try {
                // 如果是编辑模式
                if (currentDramaId) {
                    DramaManager.update(currentDramaId, dramaData);
                    alert('剧集更新成功！');
                } else {
                    // 添加新模式
                    DramaManager.add(dramaData);
                    alert('剧集添加成功！');
                }
                
                // 强制关闭模态框
                closeModal();
            } catch (error) {
                console.error('保存剧集失败:', error);
                alert('保存失败，请重试');
            }
        });
        
        // 添加事件监听器
        document.getElementById('add-drama-btn').addEventListener('click', openAddModal);
        document.getElementById('add-from-collection-btn').addEventListener('click', openAddModal);
        closeModalBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        closeDetailBtn.addEventListener('click', closeDetailModal);
        closeDetailBtn2.addEventListener('click', closeDetailModal);
        
        // 从详情页编辑剧集
        editFromDetailBtn.addEventListener('click', function() {
            closeDetailModal();
            if (currentDramaId) {
                openEditModal(currentDramaId);
            }
        });
        
        // 点击模态框外部关闭
        dramaModal.addEventListener('click', function(e) {
            if (e.target === dramaModal) {
                closeModal();
            }
        });
        
        detailModal.addEventListener('click', function(e) {
            if (e.target === detailModal) {
                closeDetailModal();
            }
        });
        
        // 筛选器事件
        document.getElementById('status-filter').addEventListener('change', () => {
            DramaManager.renderDramaTable();
        });
        
        document.getElementById('genre-filter').addEventListener('change', () => {
            DramaManager.renderDramaTable();
        });
        
        document.getElementById('drama-search').addEventListener('input', () => {
            DramaManager.renderDramaTable();
        });
        
        // 状态标签筛选
        document.querySelectorAll('.status-filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // 更新按钮样式
                document.querySelectorAll('.status-filter-btn').forEach(b => {
                    b.classList.remove('bg-primary', 'text-white');
                    b.classList.add('bg-slate-800/50', 'hover:bg-slate-700/50');
                });
                
                this.classList.remove('bg-slate-800/50', 'hover:bg-slate-700/50');
                this.classList.add('bg-primary', 'text-white');
                
                // 更新筛选器
                const status = this.getAttribute('data-status');
                document.getElementById('status-filter').value = status;
                DramaManager.renderDramaTable();
            });
        });
        
        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                    
                    // 关闭移动菜单（如果打开）
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }
                }
            });
        });
        
        // 初始化
        window.addEventListener('DOMContentLoaded', function() {
            UserManager.init();
        });
    </script>
</body>
</html>
